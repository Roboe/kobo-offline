<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">

    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
    <!--
      Notice the use of %PUBLIC_URL% in the tag above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>Kobo Offline</title>
    <noscript>
      <!-- This CSS will only load if JavaScript is disabled -->
      <style type="text/css">
        *, *::after, *::before {
          box-sizing: border-box;
        }

        html, body {
          margin: 0;
          padding: 0;
        }

        .noscript {
          display: flex;

          align-items: center;
          justify-content: center;
        }
      </style>
    </noscript>
  </head>
  <body>
    <div class="kb-app">
      <header class="kb-header">
        <div class="kb-header--content">
          <h1 class="kb-header--title">Kobo Offline</h1>
        </div>
      </header>
      <main class="kb-main">
        <section id="first-boot">
          <header>
            <h2>
              <span>First boot</span>
              <a class="self-link" href="#first-boot"></a>
              <!-- https://www.darkcoding.net/misc/kobo-ereader-touch-on-ubuntu-linux/ -->
            </h2>
            <p>Avoid being forced to connect your e-reader to the internet and to create a Kobo account.</p>
          </header>

          <p>When you start a Kobo e-reader for the first time, it <strong>blocks</strong> any interaction until you run the setup software (Win/Mac only) or connect the device to a WiFi point. This initial setup will do two things: it will force you to create a <code>kobobooks.com</code> account, and it will update your device's firmware.</p>

          <p>Some users prefer not to connect to the internet their devices or create online accounts for <strong>privacy</strong> implications, while others don't desire to buy e-books on Kobo's platform. Furthermore, there's no setup software for other OSes like <strong>GNU/Linux</strong>, so you're left alone with the WiFi option.</p>

          <section id="skip-device-registration">
            <h3>
              <span>Skip device registration</span>
              <a class="self-link" href="#skip-device-registration"></a>
              <!-- https://www.mobileread.com/forums/showthread.php?t=171664 -->
            </h3>

            <p>The Kobo firmware will skip this blocking whenever it detects there's a <code>user</code>. We could achieve this manually editing the internal device database. There are two ways to achieve this: one for most users, which is easier, and other for tech savvy users, which is simpler.</p>

            <section id="easier-option-for-most-users">
              <h4>
                <span>Easier option for average users</span>
                <a class="self-link" href="#easier-option-for-most-users"></a>
              </h4>
              <ol>
                <li>Install <a href="https://sqlitebrowser.github.io/sqlitebrowser/">DB Browser for SQLite</a> and open the <code>KoboReader.sqlite</code> in the <code>.kobo/</code> directory.</li>
                <li>Click in the <code>Browse Data</code> tab and select the <code>user</code> table in the dropdown selector.</li>
                <li>Click in the <code>New Record</code> button to register a new user. You can edit each cell value by double-clicking it.</li>
                <li>Enter a random name (e.g. "Foo") in the <code>UserDisplayName</code> cell.</li>
                <li>Enter a random e-mail address (e.g. "bar@baz.qux") in the <code>UserEmail</code> cell. It doesn't need to be a well-formed e-mail address.</li>
                <li>Save the database by clicking <code>File</code> > <code>Save changes</code>.</li>
              </ol>
            </section>

            <section id="simpler-option-for-tech-savvy-users">
              <h4>
                <span>Straigthforward option for tech savvy users</span>
                <a class="self-link" href="#simpler-option-for-tech-savvy-users"></a>
              </h4>
              <details>
                <ol>
                  <li>Assuming you already have a command-line shell for SQLite 3, open the database by running <code>$ sqlite3 ./.kobo/KoboReader.sqlite</code> in a terminal (Linux, Mac) or command prompt (Windows).</li>
                  <li>Add a new record to the <code>user</code> table by running the following query: <pre><code>INSERT INTO 'user' (UserID, UserKey, UserDisplayName, UserEmail)<br />VALUES (3, '', 'Foo', 'bar@baz.qux');</code></pre>
                  You can change those values. <code>UserID</code> is a <code>NOT NULL</code> <code>PRIMARY KEY</code>. <code>UserEmail</code> doesn't need to match a well-formed e-mail account.</li>
                  <li>Exit by running <code>.exit</code>.</li>
                </ol>
              </details>
            </section>
          </section>
        </section>

        <section id="update-firmware">
          <header>
            <h2>
              <span>Update E-reader Firmware</span>
              <a class="self-link" href="#update-firmware"></a>
            </h2>
            <p>Get the latest official firmware right from Kobo.</p>
          </header>

          <section id="how-to-install-firmware">
            <h3>
              <span>How to Install Offline Firmware Updates</span>
              <a class="self-link" href="#how-to-install-firmware"></a>
            </h3>

            <p>Download the correct ZIP file for your device from the list below. Then connect your Kobo e-reader to your computer. Extract ZIP file contents into the <code>.kobo</code> folder of your Kobo e-reader. Finally, remove your Kobo e-reader with security and your e-reader will refresh itself and start updating.</p>
          </section>

          <section id="firmware-downloads">
            <h3>
              <span>Firmware Downloads</span>
              <a class="self-link" href="#firmware-downloads"></a>
            </h3>

            <noscript class="noscript">
              <div>
                <p>JavaScript needs to be enabled to fetch firmware links right from Kobo servers. Sorry about that.</p>
                <p>This site is <a href="https://en.wikipedia.org/wiki/GPLv3">GPLv3-licensed</a> and doesn't track you (Kobo servers may log your IP, though). You can review the source code at its <a href="https://gitlab.com/Roboe/pangrama">GitLab repo</a> before running it.</p>
              </div>
            </noscript>

            <div id="react--firmware-download-list"></div>
          </section>
        </section>
      </main>
    </div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
</html>
